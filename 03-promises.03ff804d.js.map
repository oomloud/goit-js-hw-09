{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAW,CACfC,KAAMC,SAASC,cAAc,SAC7BC,MAAOF,SAASC,cAAc,kBAC9BE,KAAMH,SAASC,cAAc,iBAC7BG,OAAQJ,SAASC,cAAc,mBAC/BI,UAAWL,SAASC,cAAc,WAEpC,IAAIK,EAAiB,EACjBC,EAAkB,EAEtBT,EAASC,KAAKS,iBAAiB,UAE/B,SAAuBC,GACrBA,EAAIC,iBACJH,GAAmBT,EAASI,MAAMS,MAElBC,YAAW,KACzB,MAAMC,EAAaC,aAAY,KAC7B,GAAIR,KAAoBR,EAASM,OAAOO,MAAQ,EAE9C,YADAI,cAAcF,GAGhB,MAAMG,GAsBWC,EAtBaX,EAsBHJ,EAtBmBK,EAuB3C,IAAIW,SAAQ,CAACC,EAAKC,KACDC,KAAKC,SAAW,GAGpCH,EAAI,C,SAAEF,E,MAAUf,IAIhBkB,EAAI,C,SAAEH,E,MAAUf,GAAQ,KAT9B,IAAuBe,EAAUf,EArB3BI,IACAC,IAAoBT,EAASK,KAAKQ,MAElCK,EACGO,MAAKC,IACJ5B,EAAA6B,OAAOC,QACL,uBAAqBF,EAAIP,eAAkBO,EAAEtB,WAExCsB,KAERG,OAAMC,IACLhC,EAAA6B,OAAOI,QACL,sBAAoBD,EAAEX,eAAiBW,EAAE1B,UAAY,GAEvD,IACFJ,EAASK,KAAKQ,OAElBL,EAAiB,CAAC,G,IAmBtBV,EAAA6B,OAAOK,KAAK,CACVb,SAAU,YACVc,MAAO,QACPC,SAAU","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst elements = {\n  form: document.querySelector('.form'),\n  delay: document.querySelector('[name=\"delay\"]'),\n  step: document.querySelector('[name=\"step\"]'),\n  amount: document.querySelector('[name=\"amount\"]'),\n  btnSubmit: document.querySelector('button'),\n};\nlet promiseCounter = 1;\nlet cumulativeDelay = 0;\n\nelements.form.addEventListener('submit', submitHandler);\n\nfunction submitHandler(evt) {\n  evt.preventDefault();\n  cumulativeDelay = +elements.delay.value;\n\n  const timerId = setTimeout(() => {\n    const intervalId = setInterval(() => {\n      if (promiseCounter === +elements.amount.value + 1) {\n        clearInterval(intervalId);\n        return;\n      }\n      const promise = createPromise(promiseCounter, cumulativeDelay);\n      promiseCounter++;\n      cumulativeDelay += +elements.step.value;\n\n      promise\n        .then(data => {\n          Notify.success(\n            `✅ Fulfilled promise ${data.position} in ${data.delay}ms`\n          );\n          return data;\n        })\n        .catch(err => {\n          Notify.failure(\n            `❌ Rejected promise ${err.position} in ${err.delay}ms`\n          );\n        });\n    }, +elements.step.value);\n    // resetting counter of promises in case user wants to start again without refreshing the page\n    promiseCounter = 1;\n  });\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((res, rej) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      // Fulfill\n      res({ position, delay });\n      // console.log(shouldResolve);\n    } else {\n      // Reject\n      rej({ position, delay });\n      // console.log(shouldResolve);\n    }\n  });\n}\n\nNotify.init({\n  position: 'right-top',\n  width: '360px',\n  fontSize: '16px',\n});\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$elements","form","document","querySelector","delay","step","amount","btnSubmit","$47d4ff9957288465$var$promiseCounter","$47d4ff9957288465$var$cumulativeDelay","addEventListener","evt","preventDefault","value","setTimeout","intervalId","setInterval","clearInterval","promise","position","Promise","res","rej","Math","random","then","data","Notify","success","catch","err","failure","init","width","fontSize"],"version":3,"file":"03-promises.03ff804d.js.map"}